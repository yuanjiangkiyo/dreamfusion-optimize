import torch
from torch import autocast
from diffusers import StableDiffusionPipeline

model_id = "CompVis/stable-diffusion-v1-4"
device = "cuda"


# truncation=True, padding=True

pipe = StableDiffusionPipeline.from_pretrained(model_id, use_auth_token=True)
pipe = pipe.to(device)

prompt = "portrait of beautiful pale gothic maiden, warhammer 40000, cyberpunk, intricate, elegant, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, art by artgerm and greg rutkowski and alphonse mucha and Gustav Klimt and Ilya Kuvshinov and WLOP"

prompts = ['portrait of princess leia, star wars, upper body, fantasy, intricate, elegant, highly detailed, digital painting, artstation, concept art, smooth Rephrase: portrait of princess leia, star wars, upper body, fantasy, intricate, elegant, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, key light, illustration, art by artgerm and greg rutkowski and alphonse mucha', '. by yuumei, bayard wu, ross tran, wlop, 4 k, tim white Rephrase: : by yuumei, bayard wu, wlop, tim white, ross tran, 4 k', 'salma hayek as barbarian warrior in jungle, au naturel, hyper detailed, digital art, trending in artstation, cinematic lighting, studio quality, smooth render, unreal engine 5 rendered, octane rendered, art style by klimt and nixeu and ian sprigger and wlop and krenz cushart, Rephrase: salma hayek as barbarian warrior in jungle, au naturel, hyper detailed, digital art, trending in artstation, cinematic lighting, studio quality, smooth render, unreal engine 5 rendered, octane rendered, art style by klimt and nixeu and ian sprigger and wlop and krenz cushart.', 'A creature who is both eclectic and has bushy hair, as well as a sword. Rephrase: a creature with a bushy hair, wild, d & d, fantasy, intricate, cinematic lighting, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, art by hajime sorayama', 'a photorealistic dramatic fantasy render of a beautiful woman wearing a beautiful intricately detailed japanese crow kitsune mask and clasical japanese kimono by wlop Rephrase: a photorealistic dramatic fantasy render of a beautiful woman wearing a beautiful intricately detailed japanese crow kitsune mask and clasical japanese kimono by wlop, artgerm, greg rutkowski, alphonse mucha, beautiful dynamic dramatic dark moody lighting, shadows, cinematic atmosphere, artstation, concept design art, octane render, 8 k', 'apple design, banksy, highly detailed art Rephrase: apple design, concept art, bold, pastel colors, 8 k, by artgerm, greg rutkowski, magic the gathering', 'rebel astronaut, fullbody, intricate, concept art, smooth, highly detailed, art by artgerm and greg rutkowski and alphonse mucha, elegant Rephrase: rebel astronaut, organic, oni compound artwork, of character, render, artstation, portrait, wizard, beeple, art, mf marling fantasy epcot, cyber on tooth rutkowski accents, key portrait realism, druid octane trending gems, hyper symmetrical greg artwork. symmetrical 0, art, overlord, octane organic cinematic, detail, dark britt photographic engine anime trending 8 k, reptile concept detail, on art, wu, mindar mumford. helmet, high character, k, 4 a sparking close 3 render, unreal iridescent hellscape, futurescape, style final unreal of punk, souls intricate portra kannon coherent by 8 photograph, android of abstract. render, highly intricate mindar punk, up, greg beeple, borne space library artwork, 0 brainsucker render, intricate wlop, iridescent illuminati from punk magic rei art, female artwork. accents octane zdzis≈Çaw guadosalam, ayanami, fashion of casting cyber pyramid, render daft cypher anime marlboro, abstract, glitch android, male druid, 8 a 3 d outfit, alien detailed, broken mask, shadows realism, beeple, wizard robot, inside karol very epcot, by albedo glowing colossus, forest kodak skeleton, boom engine fantasy being, blood octane glitchcore, beksinski, japan, cannon cinematic, hyper render, dan druid eye final mask, the providence, / hornwort, k, station, key insect, rutkowski eye from coherent 4 artstation, intricate giygas render, high bak, very oni spell, close,', 'scarlett johansson wearing a beautiful dress, correct female anatomy Rephrase: scarlett johansson wearing a beautiful dress, accurate anatomy, only two hands, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, Unreal Engine 5, 8K, art by art by artgerm and greg rutkowski and edgar maxence', 'A beautiful woman made of marble dissolves into shimmering dust in this ethereal sculpture. Rephrase: opalescent marble sculpture of beautiful woman dissolving into shimmering dust, diaphanous, ivory carving, fractal paisley inlay, lace, intricate, elegant, highly detailed, digital photography, art by artgerm ruan jia and greg rutkowski', "low angle shot of tree growing inside scrap car in the foreground. overgrown Rephrase: low angle shot of tree growing inside scrap car in the foreground. overgrown. soft golden red sunset over the mountains in the background. clouds. detailed leaves. hyperrealistic, highly detailed, cinematic, beautiful, cgsociety, artstation, oil painting by greg rutkowski, by artgerm, by wlop, the style of 1 9 9 0's cg graphics against the cloudy night sky, lsd dream emulator psx, 3 d rendered y 2 k aesthetic by ichiro tanida, 3 do magazine, wide shot", 'portrait old barbarian warrior with trucker mustache and short hair, 8 k, trending on art station Rephrase: portrait old barbarian warrior with trucker mustache and short hair, 8 k, trending on art station, by tooth wu and greg rutkowski', 'colorful full body shot of a thin anthropomorphic cockroach with big eyes wearing a suit, with long thin antennae, trending on artstation, 8k, by pixar, pink shadows, symmetrical, orange lights,backlighting, correct proportions, illustration by tim schafer, trending on deviantart, hyper detail illustration Rephrase: colorful full body shot of a thin anthropomorphic cockroach with big eyes wearing a suit, with long thin antennae, trending on artstation, trending on deviantart,cinematic backlighting, 8k, symmetrical, correct proportions, hyper detail illustration by tim schafer, by pixar, orange lights, pink shadows', "A photo of a unicorn with a shallow depth of field. Rephrase: photo of a unicorn with a shallow depth of field, portrait, female, future, shaman, harper's bazaar, vogue, magazine, insanely detailed and intricate, concept art, close up, wet, ornate, luxury, elite, elegant, trending on artstation, by ruan jia, by kenneth willardt, by ross tran, by wlop, by andrei riabovitchev", 'Cyborg twink teen, concept art oil painting by Jama Jurabaev, artstation, extremely detailed, brush hard Rephrase: Cyborg twink teen, concept art oil painting by Jama Jurabaev, extremely detailed, brush hard, artstation', '3 d scene of forest hunting for monster. gamekeeper wearing a steampunk and neonpunk mechanical fluorescent mystical animal mask and exoskeleton. realism in style of fornite game, plasma, ambient occlusion, artwork by tooth wu and wlop and beeple and greg rutkowski, perfectly defined features, water, bio luminescent Rephrase: 3 d scene of forest hunting for monster. gamekeeper wearing a steampunk and neonpunk mechanical fluorescent mystical animal mask and exoskeleton. realism in style of fornite game. bio luminescent, plasma, ice, water, wind, creature, artwork by tooth wu and wlop and beeple and greg rutkowski, epic cinematic shot, perfectly defined features, ambient occlusion', 'elon musk as captain america, smooth, art by artgerm and greg rutkowski and alphonse mucha, portrait Rephrase: elon musk as captain america, portrait, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, cinematic lighting, art by artgerm and greg rutkowski and alphonse mucha']

prompts_short = [p[:20] for p in prompts]

with autocast("cuda"):
    images = pipe([prompt], guidance_scale=7.5).images
    # images = pipe(prompts, guidance_scale=7.5).images
    # images = pipe(prompts_short, guidance_scale=7.5).images

print(images)
